{"version":3,"sources":["./src/app/pages/chart-bar/race/page.html","./src/app/pages/chart-bar/race/module.ts","./src/app/pages/chart-bar/race/page.scss","./src/app/pages/chart-bar/race/page.ts"],"names":[],"mappings":"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","file":"pages-chart-bar-race-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n\\t<common-header>D3.js with Ionic</common-header>\\n</ion-header>\\n\\n<ion-content>\\n\\t<div class=\\\"bar-chart-box ion-padding-horizontal ion-padding-bottom\\\">\\n\\t\\t<div id=\\\"bar-chart-race\\\" class=\\\"bar-chart\\\"></div>\\n\\t</div>\\n\\n</ion-content>\"","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\n\nimport { ComponentsModule } from 'src/app/shared/components/components.module';\n\nimport { BarChartRacePage } from './page';\n\n@NgModule({\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tIonicModule,\n\t\tRouterModule.forChild([{ path: '', component: BarChartRacePage }]),\n\t\tComponentsModule\n\t],\n\tschemas: [CUSTOM_ELEMENTS_SCHEMA],\n\tdeclarations: [BarChartRacePage]\n})\nexport class BarChartRacePageModule { }\n","module.exports = \".Xbar-chart-box {\\n  background-color: purple;\\n}\\n\\n.Xbar-chart {\\n  background-color: orange;\\n}\\n\\ntext {\\n  font-size: 16px;\\n  font-family: Open Sans, sans-serif;\\n}\\n\\ntext.title {\\n  font-size: 24px;\\n  font-weight: 500;\\n}\\n\\ntext.subTitle {\\n  font-weight: 500;\\n  fill: #777777;\\n}\\n\\ntext.caption {\\n  font-weight: 400;\\n  font-size: 14px;\\n  fill: #777777;\\n}\\n\\ntext.label {\\n  font-weight: 600;\\n}\\n\\ntext.yearText {\\n  font-size: 64px;\\n  font-weight: 700;\\n  opacity: 0.25;\\n}\\n\\n.tick text {\\n  fill: #777777;\\n}\\n\\n.xAxis .tick:nth-child(2) text {\\n  text-anchor: start;\\n}\\n\\n.tick line {\\n  shape-rendering: CrispEdges;\\n  stroke: #dddddd;\\n}\\n\\n.tick line.origin {\\n  stroke: #aaaaaa;\\n}\\n\\npath.domain {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9TaGFyZWQvQ0xPVUQvRGV2ZWxvcG1lbnQuR2l0SHViL1JlcG9zaXRvcmllcy5Gcm9tR2l0aHViL3JlcG9zaXRvcmllcy9pb25pYy10b29sYm94L1dvcmtpbmctd2l0aF9EMy5qcy9zcmMvYXBwL3BhZ2VzL2NoYXJ0LWJhci9yYWNlL3BhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvY2hhcnQtYmFyL3JhY2UvcGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Msd0JBQUE7QUNDRDs7QURDQTtFQUNDLHdCQUFBO0FDRUQ7O0FEQ0E7RUFDQyxlQUFBO0VBQ0Esa0NBQUE7QUNFRDs7QURBQTtFQUNDLGVBQUE7RUFDQSxnQkFBQTtBQ0dEOztBRERBO0VBQ0MsZ0JBQUE7RUFDQSxhQUFBO0FDSUQ7O0FERkE7RUFDQyxnQkFBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0FDS0Q7O0FESEE7RUFDQyxnQkFBQTtBQ01EOztBREpBO0VBQ0MsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsYUFBQTtBQ09EOztBRExBO0VBQ0MsYUFBQTtBQ1FEOztBRE5BO0VBQ0Msa0JBQUE7QUNTRDs7QURQQTtFQUNDLDJCQUFBO0VBQ0EsZUFBQTtBQ1VEOztBRFJBO0VBQ0MsZUFBQTtBQ1dEOztBRFRBO0VBQ0MsYUFBQTtBQ1lEIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2hhcnQtYmFyL3JhY2UvcGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLlhiYXItY2hhcnQtYm94IHtcblx0YmFja2dyb3VuZC1jb2xvcjogcHVycGxlO1xufVxuLlhiYXItY2hhcnQge1xuXHRiYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7XG59XG5cbnRleHQge1xuXHRmb250LXNpemU6IDE2cHg7XG5cdGZvbnQtZmFtaWx5OiBPcGVuIFNhbnMsIHNhbnMtc2VyaWY7XG59XG50ZXh0LnRpdGxlIHtcblx0Zm9udC1zaXplOiAyNHB4O1xuXHRmb250LXdlaWdodDogNTAwO1xufVxudGV4dC5zdWJUaXRsZSB7XG5cdGZvbnQtd2VpZ2h0OiA1MDA7XG5cdGZpbGw6ICM3Nzc3Nzc7XG59XG50ZXh0LmNhcHRpb24ge1xuXHRmb250LXdlaWdodDogNDAwO1xuXHRmb250LXNpemU6IDE0cHg7XG5cdGZpbGw6ICM3Nzc3Nzc7XG59XG50ZXh0LmxhYmVsIHtcblx0Zm9udC13ZWlnaHQ6IDYwMDtcbn1cbnRleHQueWVhclRleHQge1xuXHRmb250LXNpemU6IDY0cHg7XG5cdGZvbnQtd2VpZ2h0OiA3MDA7XG5cdG9wYWNpdHk6IDAuMjU7XG59XG4udGljayB0ZXh0IHtcblx0ZmlsbDogIzc3Nzc3Nztcbn1cbi54QXhpcyAudGljazpudGgtY2hpbGQoMikgdGV4dCB7XG5cdHRleHQtYW5jaG9yOiBzdGFydDtcbn1cbi50aWNrIGxpbmUge1xuXHRzaGFwZS1yZW5kZXJpbmc6IENyaXNwRWRnZXM7XG5cdHN0cm9rZTogI2RkZGRkZDtcbn1cbi50aWNrIGxpbmUub3JpZ2luIHtcblx0c3Ryb2tlOiAjYWFhYWFhO1xufVxucGF0aC5kb21haW4ge1xuXHRkaXNwbGF5OiBub25lO1xufVxuIiwiLlhiYXItY2hhcnQtYm94IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcHVycGxlO1xufVxuXG4uWGJhci1jaGFydCB7XG4gIGJhY2tncm91bmQtY29sb3I6IG9yYW5nZTtcbn1cblxudGV4dCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgZm9udC1mYW1pbHk6IE9wZW4gU2Fucywgc2Fucy1zZXJpZjtcbn1cblxudGV4dC50aXRsZSB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxudGV4dC5zdWJUaXRsZSB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZpbGw6ICM3Nzc3Nzc7XG59XG5cbnRleHQuY2FwdGlvbiB7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZmlsbDogIzc3Nzc3Nztcbn1cblxudGV4dC5sYWJlbCB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5cbnRleHQueWVhclRleHQge1xuICBmb250LXNpemU6IDY0cHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIG9wYWNpdHk6IDAuMjU7XG59XG5cbi50aWNrIHRleHQge1xuICBmaWxsOiAjNzc3Nzc3O1xufVxuXG4ueEF4aXMgLnRpY2s6bnRoLWNoaWxkKDIpIHRleHQge1xuICB0ZXh0LWFuY2hvcjogc3RhcnQ7XG59XG5cbi50aWNrIGxpbmUge1xuICBzaGFwZS1yZW5kZXJpbmc6IENyaXNwRWRnZXM7XG4gIHN0cm9rZTogI2RkZGRkZDtcbn1cblxuLnRpY2sgbGluZS5vcmlnaW4ge1xuICBzdHJva2U6ICNhYWFhYWE7XG59XG5cbnBhdGguZG9tYWluIHtcbiAgZGlzcGxheTogbm9uZTtcbn0iXX0= */\"","\n/*\n https://observablehq.com/d/bef0441bd98d59a7\n*/\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { HttpClient } from '@angular/common/http';\n\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { throwError } from 'rxjs';\n\nimport * as d3 from 'd3-selection';\nimport * as d3Scale from 'd3-scale';\nimport * as d3Axis from 'd3-axis';\nimport * as d3Interpolate from 'd3-interpolate';\nimport * as d3Array from 'd3-array';\nimport * as d3Timer from 'd3-timer';\nimport * as d3Format from 'd3-format';\nimport * as d3Ease from 'd3-ease';\nimport * as d3Color from 'd3-color';\nimport * as d3Fetch from 'd3-fetch';\n\nimport { Toolbox } from 'src/app/shared/helpers/toolbox.service';\n\nexport class DataModel {\n\tname: string;\n}\n\n@Component({\n\tselector: 'page-basic-shapes',\n\ttemplateUrl: 'page.html',\n\tstyleUrls: ['page.scss']\n})\nexport class BarChartRacePage implements OnInit, OnDestroy {\n\tpublic ID = 'BarChartRacePage';\n\n\tprivate toolbox = new Toolbox(this.ID);\n\n\t//\n\t//\n\tbrandData = [];\n\n\tticker: any;\n\n\tconstructor(private http: HttpClient) {\n\t\tthis.toolbox.log('constructor');\n\t}\n\n\tngOnInit() {\n\t\tthis.toolbox.log('ngOnInit');\n\n\t\tthis.getChartData().then((data) => {\n\t\t\tthis.brandData = data;\n\t\t\tthis.createChart();\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tthis.ticker.stop();\n\t}\n\n\t// This is a lightly modified version of Mike Bostock’s text halo function from @d3/connected-scatterplot\n\thalo(text, strokeWidth) {\n\t\ttext.select(function () {\n\t\t\treturn this.parentNode.insertBefore(this.cloneNode(true), this);\n\t\t})\n\t\t\t.style('fill', '#ffffff')\n\t\t\t.style('stroke', '#ffffff')\n\t\t\t.style('stroke-width', strokeWidth)\n\t\t\t.style('stroke-linejoin', 'round')\n\t\t\t.style('opacity', 1);\n\t}\n\n\textractData(data) {\n\t\tthis.toolbox.log('extractData', 'data = ' + data);\n\t\tthis.brandData = data;\n\t}\n\n\thandleError(err) {\n\t\tthis.toolbox.log('handleError', 'err = ' + JSON.stringify(err));\n\t}\n\n\tasync getChartData(): Promise<any[]> {\n\t\tthis.toolbox.log('initChartData');\n\t\t/*\n\t\tconst ROOT = 'https://gist.githubusercontent.com/johnburnmurdoch';\n\t\tconst GIST = '2e5712cce1e2a9407bf081a952b85bac/raw/08cf82f5e03c619f7da2700d1777da0b5247df18';\n\t\tconst FILE = 'INTERBRAND_brand_values_2000_2018_decimalised.csv';\n\t\t*/\n\n\t\tconst ROOT = '/assets';\n\t\tconst GIST = 'data';\n\t\tconst FILE = 'brands.csv';\n\n\t\tconst URL = ROOT + '/' + GIST + '/' + FILE;\n\n\t\treturn d3Fetch.csv(URL);\n\n\n\t\tif (false) {\n\t\t\tawait this.http\n\t\t\t\t.get<any[]> /* <DataModel[]> */(URL)\n\t\t\t\t.subscribe(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tthis.brandData = data;\n\t\t\t\t\t\tthis.toolbox.log('initChartData', 'subscribe: data = ' + JSON.stringify(data));\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tthis.toolbox.log('initChartData', 'subscribe: error = ' + JSON.stringify(error));\n\t\t\t\t\t\tthis.handleError(error);\n\t\t\t\t\t});\n\t\t}\n\t\tthis.toolbox.log('initChartData', 'done: brandData = ' + this.brandData);\n\t}\n\n\tcreateChart(): void {\n\t\tthis.toolbox.log('createChart');\n\n\t\tconst tickDuration = 333;\n\t\tconst topN = 12;\n\n\t\tconst height = 800;\n\t\tconst width = 800;\n\n\t\tconst svg = d3.select('#bar-chart-race').append('svg')\n\t\t\t.attr('width', height)\n\t\t\t.attr('height', width)\n\t\t\t.style('border', '1px solid black')\n\n\t\tthis.toolbox.log('createChart', 'svg = ' + svg);\n\n\t\tconst margin = { top: 80, right: 0, bottom: 5, left: 0 };\n\t\tconst barPadding = (height - (margin.bottom + margin.top)) / (topN * 5);\n\n\t\tconst title = svg.append('text')\n\t\t\t.attr('class', 'title')\n\t\t\t.attr('y', 40)\n\t\t\t.html('18 years of Interbrand’s Top Global Brands');\n\n\t\tconst subTitle = svg.append('text')\n\t\t\t.attr('class', 'subTitle')\n\t\t\t.attr('y', 20)\n\t\t\t.html('Brand value, $m');\n\n\t\tconst caption = svg.append('text')\n\t\t\t.attr('class', 'caption')\n\t\t\t.attr('x', width)\n\t\t\t.attr('y', height - 5)\n\t\t\t.style('text-anchor', 'end')\n\t\t\t.html('Source: Interbrand');\n\n\t\tlet year = 2000;\n\n\t\tthis.brandData.forEach(d => {\n\t\t\td.value = +d.value;\n\t\t\td.lastValue = +d.lastValue;\n\t\t\td.value = isNaN(d.value) ? 0 : d.value;\n\t\t\td.year = +d.year;\n\t\t\td.colour = d3Color.hsl(Math.random() * 360, 0.75, 0.75);\n\t\t});\n\n\t\tlet yearSlice = this.brandData.filter(d => d.year == year && !isNaN(d.value))\n\t\t\t.sort((a, b) => b.value - a.value)\n\t\t\t.slice(0, topN);\n\n\t\tyearSlice.forEach((d, i) => d.rank = i);\n\n\t\tthis.toolbox.log('createChart', 'yearSlice for year ' + year);\n\t\tconsole.table(yearSlice);\n\n\t\tconst x = d3Scale.scaleLinear()\n\t\t\t.domain([0, d3Array.max(yearSlice, d => d.value)])\n\t\t\t.range([margin.left, width - margin.right - 65]);\n\n\t\tconst y = d3Scale.scaleLinear()\n\t\t\t.domain([topN, 0])\n\t\t\t.range([height - margin.bottom, margin.top]);\n\n\t\tconst xAxis = d3Axis.axisTop()\n\t\t\t.scale(x)\n\t\t\t.ticks(width > 500 ? 5 : 2)\n\t\t\t.tickSize(-(height - margin.top - margin.bottom))\n\t\t\t.tickFormat(d => d3Format.format(',')(d));\n\n\t\tsvg.append('g')\n\t\t\t.attr('class', 'axis xAxis')\n\t\t\t.attr('transform', `translate(0, ${margin.top})`)\n\t\t\t.call(xAxis)\n\t\t\t.selectAll('.tick line')\n\t\t\t.classed('origin', d => d === 0);\n\n\t\tsvg.selectAll('rect.bar')\n\t\t\t.data(yearSlice, d => d.name)\n\t\t\t.enter()\n\t\t\t.append('rect')\n\t\t\t.attr('class', 'bar')\n\t\t\t.attr('x', x(0) + 1)\n\t\t\t.attr('width', d => x(d.value) - x(0) - 1)\n\t\t\t.attr('y', d => y(d.rank) + 5)\n\t\t\t.attr('height', y(1) - y(0) - barPadding)\n\t\t\t.style('fill', d => d.colour);\n\n\t\tsvg.selectAll('text.label')\n\t\t\t.data(yearSlice, d => d.name)\n\t\t\t.enter()\n\t\t\t.append('text')\n\t\t\t.attr('class', 'label')\n\t\t\t.attr('x', d => x(d.value) - 8)\n\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1)\n\t\t\t.attr('text-anchor', 'end')\n\t\t\t.html(d => d.name);\n\n\t\tsvg.selectAll('text.valueLabel')\n\t\t\t.data(yearSlice, d => d.name)\n\t\t\t.enter()\n\t\t\t.append('text')\n\t\t\t.attr('class', 'valueLabel')\n\t\t\t.attr('x', d => x(d.value) + 5)\n\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1)\n\t\t\t.text(d => d3Format.format(',.0f')(d.lastValue));\n\n\t\tconst yearText = svg.append('text')\n\t\t\t.attr('class', 'yearText')\n\t\t\t.attr('x', width - margin.right)\n\t\t\t.attr('y', height - 25)\n\t\t\t.style('text-anchor', 'end')\n\t\t\t.html(year)\n\t\t\t//\t.call(this.halo, 10)\n\t\t\t;\n\n\n\t\t/*-----------------------------------------------------------------------------------------\n\t\t**\n\t\t**\n\t\t**---------------------------------------------------------------------------------------*/\n\t\tthis.ticker = d3Timer.interval(e => {\n\n\t\t\tthis.toolbox.log('createChart:ticker', '*** yearSlice for year = ' + year);\n\t\t\tyearSlice = this.brandData.filter(d => d.year == year && !isNaN(d.value))\n\t\t\t\t.sort((a, b) => b.value - a.value)\n\t\t\t\t.slice(0, topN);\n\n\t\t\tyearSlice.forEach((d, i) => d.rank = i);\n\n\t\t\tx.domain([0, d3Array.max(yearSlice, d => d.value)]);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'select xAxis');\n\t\t\t/*\n\t\t\tsvg.select('.xAxis')\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.call(xAxis);\n\t\t\t*/\n\n\t\t\tconst bars = svg.selectAll('.bar').data(yearSlice, d => d.name);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'bars enter');\n\t\t\tbars\n\t\t\t\t.enter()\n\t\t\t\t.append('rect')\n\t\t\t\t.attr('class', d => `bar ${d.name.replace(/\\s/g, '_')}`)\n\t\t\t\t.attr('x', x(0) + 1)\n\t\t\t\t.attr('width', d => x(d.value) - x(0) - 1)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5)\n\t\t\t\t.attr('height', y(1) - y(0) - barPadding)\n\t\t\t\t.style('fill', d => d.colour)\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('y', d => y(d.rank) + 5);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'bars transistion');\n\t\t\tbars\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('width', d => x(d.value) - x(0) - 1)\n\t\t\t\t.attr('y', d => y(d.rank) + 5);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'bars exit');\n\t\t\tbars\n\t\t\t\t.exit()\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('width', d => x(d.value) - x(0) - 1)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5)\n\t\t\t\t.remove();\n\n\t\t\tconst labels = svg.selectAll('.label').data(yearSlice, d => d.name);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'labels enter');\n\t\t\tlabels\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t.attr('class', 'label')\n\t\t\t\t.attr('x', d => x(d.value) - 8)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5 + ((y(1) - y(0)) / 2))\n\t\t\t\t.attr('text-anchor', 'end')\n\t\t\t\t.html(d => d.name)\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'labels transition');\n\t\t\tlabels\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('x', d => x(d.value) - 8)\n\t\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'labels exit');\n\t\t\tlabels\n\t\t\t\t.exit()\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('x', d => x(d.value) - 8)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5)\n\t\t\t\t.remove();\n\n\t\t\tconst valueLabels = svg.selectAll('.valueLabel').data(yearSlice, d => d.name);\n\n\t\t\tthis.toolbox.log('createChart:ticker', 'valueLabels enter');\n\t\t\tvalueLabels\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t.attr('class', 'valueLabel')\n\t\t\t\t.attr('x', d => x(d.value) + 5)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5)\n\t\t\t\t.text(d => d3Format.format(',.0f')(d.lastValue))\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1);\n\n\t\t\tvalueLabels\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('x', d => x(d.value) + 5)\n\t\t\t\t.attr('y', d => y(d.rank) + 5 + ((y(1) - y(0)) / 2) + 1)\n\t\t\t\t.tween('text', (d) => {\n\t\t\t\t\tconst i = d3Interpolate.interpolateRound(d.lastValue, d.value);\n\t\t\t\t\treturn function (t) {\n\t\t\t\t\t\tthis.textContent = d3Format.format(',')(i(t));\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\tvalueLabels\n\t\t\t\t.exit()\n\t\t\t\t.transition()\n\t\t\t\t.duration(tickDuration)\n\t\t\t\t.ease(d3Ease.easeLinear)\n\t\t\t\t.attr('x', d => x(d.value) + 5)\n\t\t\t\t.attr('y', d => y(topN + 1) + 5)\n\t\t\t\t.remove();\n\n\t\t\tyearText.html(year);\n\n\t\t\tif (year === 2003) {\n\t\t\t\tthis.ticker.stop();\n\t\t\t}\n\n\t\t\tyear = d3Format.format('.1f')((+year) + 0.1);\n\t\t}, tickDuration);\n\n\t\treturn svg.node();\n\t}\n}\n"],"sourceRoot":""}